# 拖拽式座位编排网站开发计划

## 项目概述

开发一个功能完善的拖拽式座位编排网站，支持学生信息管理、座位区域配置、拖拽排座、座位表导出等功能。

## 技术栈

- **前端框架**: Vue 3 + TypeScript
- **状态管理**: Pinia
- **路由**: Vue Router
- **UI组件库**: Element Plus
- **CSS框架**: Tailwind CSS
- **构建工具**: Vite
- **文件解析**: xlsx (Excel解析)、papaparse (CSV解析)
- **导出功能**: html2canvas (图片导出)、jspdf (PDF导出)
- **拖拽功能**: Vue Draggable Plus 或原生 HTML5 Drag & Drop API

## 项目结构规划

```
src/
├── assets/                    # 静态资源
├── components/                # 组件目录
│   ├── layout/               # 布局组件
│   │   └── MainLayout.vue    # 主布局
│   ├── student/              # 学生相关组件
│   │   ├── StudentImport.vue # 学生导入组件
│   │   ├── StudentList.vue   # 学生列表组件
│   │   └── StudentCard.vue   # 学生卡片组件
│   ├── seat/                 # 座位相关组件
│   │   ├── SeatGrid.vue      # 座位网格组件
│   │   ├── SeatCell.vue      # 单个座位组件
│   │   └── SeatConfig.vue    # 座位配置组件
│   ├── export/               # 导出相关组件
│   │   └── ExportPanel.vue   # 导出面板组件
│   └── common/               # 通用组件
│       └── DropZone.vue      # 拖拽区域组件
├── composables/              # 组合式函数
│   ├── useDragDrop.ts        # 拖拽逻辑
│   ├── useExport.ts          # 导出逻辑
│   └── useStorage.ts         # 本地存储逻辑
├── stores/                   # Pinia状态管理
│   ├── student.ts            # 学生状态
│   ├── seat.ts               # 座位状态
│   └── config.ts             # 配置状态
├── types/                    # TypeScript类型定义
│   ├── student.ts            # 学生类型
│   ├── seat.ts               # 座位类型
│   └── config.ts             # 配置类型
├── utils/                    # 工具函数
│   ├── parser.ts             # 文件解析工具
│   ├── exporter.ts           # 导出工具
│   └── storage.ts            # 存储工具
├── views/                    # 页面视图
│   └── HomeView.vue          # 主页面
├── router/                   # 路由配置
└── main.ts                   # 入口文件
```

## 开发阶段划分

### 第一阶段：项目基础搭建

1. **安装依赖**
   - 安装 Element Plus
   - 安装 Tailwind CSS
   - 安装文件解析库 (xlsx, papaparse)
   - 安装导出库 (html2canvas, jspdf)
   - 安装拖拽库 (vue-draggable-plus)

2. **项目配置**
   - 配置 Element Plus (按需引入)
   - 配置 Tailwind CSS
   - 配置主题样式

3. **类型定义**
   - 定义学生数据类型
   - 定义座位数据类型
   - 定义配置数据类型

### 第二阶段：核心状态管理

1. **学生状态管理 (student store)**
   - 学生列表数据
   - 待排座学生列表
   - 已排座学生列表
   - 学生信息编辑功能

2. **座位状态管理 (seat store)**
   - 座位网格数据
   - 座位占用状态
   - 座位与学生映射关系

3. **配置状态管理 (config store)**
   - 行列数配置
   - 导出格式配置
   - 界面设置

### 第三阶段：学生信息管理功能

1. **文件导入组件**
   - 支持 Excel 文件上传和解析
   - 支持 CSV 文件上传和解析
   - 文件格式校验
   - 数据预览功能

2. **学生列表组件**
   - 显示待排座学生列表
   - 学生信息编辑功能
   - 学生删除功能
   - 学生搜索/筛选功能

3. **学生卡片组件**
   - 显示学生基本信息
   - 支持拖拽操作
   - 显示排座状态

### 第四阶段：座位区域配置功能

1. **座位配置组件**
   - 行数设置 (1-20行)
   - 列数设置 (1-20列)
   - 座位布局预览
   - 讲台位置设置

2. **座位网格组件**
   - 动态生成座位网格
   - 响应式布局适配
   - 座位状态可视化

3. **单个座位组件**
   - 显示座位编号
   - 显示入座学生信息
   - 支持拖拽放置
   - 空座位/已占用状态

### 第五阶段：拖拽排座功能

1. **拖拽逻辑实现**
   - 实现学生卡片拖拽
   - 实现座位放置逻辑
   - 实现座位间移动逻辑
   - 实现拖拽预览效果

2. **交互优化**
   - 拖拽高亮提示
   - 无效放置区域提示
   - 拖拽动画效果
   - 触摸设备支持

3. **批量操作**
   - 批量拖拽排座
   - 一键清空座位
   - 撤销/重做功能

### 第六阶段：座位表导出功能

1. **图片导出**
   - PNG 格式导出
   - JPG 格式导出
   - 自定义分辨率设置

2. **文档导出**
   - PDF 格式导出
   - Excel 格式导出 (座位表)

3. **打印预览**
   - 打印预览界面
   - 打印设置选项
   - 页面布局调整

### 第七阶段：额外功能

1. **数据持久化**
   - LocalStorage 存储
   - 自动保存功能
   - 数据恢复功能
   - 多方案保存/加载

2. **随机排座功能**
   - 一键随机排座
   - 部分随机排座
   - 排除特定学生

3. **智能排座建议**
   - 按身高排座
   - 按成绩排座
   - 自定义条件排座
   - 排座规则配置

### 第八阶段：界面优化与测试

1. **界面优化**
   - 响应式布局完善
   - 移动端适配
   - 暗色模式支持
   - 界面美化

2. **性能优化**
   - 虚拟滚动优化
   - 拖拽性能优化
   - 大数据量处理

3. **测试与调试**
   - 功能测试
   - 兼容性测试
   - 性能测试

## 核心数据结构设计

### 学生数据类型

```typescript
interface Student {
  id: string                    // 唯一标识
  name: string                  // 姓名
  studentId?: string            // 学号
  gender?: 'male' | 'female'    // 性别
  height?: number               // 身高
  score?: number                // 成绩
  [key: string]: any            // 其他自定义字段
}
```

### 座位数据类型

```typescript
interface Seat {
  id: string                    // 座位ID
  row: number                   // 行号
  col: number                   // 列号
  studentId?: string            // 入座学生ID
  isLocked: boolean             // 是否锁定
}
```

### 配置数据类型

```typescript
interface SeatConfig {
  rows: number                  // 行数
  cols: number                  // 列数
  showPodium: boolean           // 是否显示讲台
  seatWidth: number             // 座位宽度
  seatHeight: number            // 座位高度
}
```

## 关键技术实现要点

### 1. 拖拽实现方案

使用 HTML5 原生 Drag & Drop API 配合 Vue 3 组合式函数实现：
- `draggable` 属性实现元素可拖拽
- `@dragstart`, `@dragover`, `@drop` 事件处理
- 使用 `dataTransfer` 传递数据

### 2. 文件解析方案

- Excel: 使用 `xlsx` 库解析 .xlsx/.xls 文件
- CSV: 使用 `papaparse` 库解析 CSV 文件
- 支持自定义列映射

### 3. 导出方案

- 图片: 使用 `html2canvas` 将 DOM 转换为图片
- PDF: 使用 `jspdf` 生成 PDF 文档
- Excel: 使用 `xlsx` 库生成 Excel 文件

### 4. 数据持久化方案

- 使用 LocalStorage 存储座位方案
- 支持多方案管理
- 自动保存机制 (防抖处理)

## 性能要求

- 支持 100+ 学生流畅操作
- 拖拽响应时间 < 100ms
- 导出处理时间 < 5s
- 页面加载时间 < 2s

## 界面布局设计

```
┌─────────────────────────────────────────────────────────────┐
│                        顶部导航栏                            │
│  [Logo] 座位编排系统        [保存] [加载] [导出] [设置]       │
├──────────────┬──────────────────────────────────────────────┤
│              │                                              │
│   导入区     │                                              │
│  [导入文件]  │                                              │
│              │                                              │
├──────────────┤              座位编排区                       │
│              │                                              │
│  待排学生区  │         ┌─────────────────────┐              │
│              │         │      讲 台          │              │
│  [学生卡片]  │         └─────────────────────┘              │
│  [学生卡片]  │                                              │
│  [学生卡片]  │         [座位] [座位] [座位] [座位]           │
│  [学生卡片]  │         [座位] [座位] [座位] [座位]           │
│  [学生卡片]  │         [座位] [座位] [座位] [座位]           │
│              │                                              │
├──────────────┴──────────────────────────────────────────────┤
│                        底部工具栏                            │
│  [随机排座] [智能排座] [清空座位] [行列设置]                  │
└─────────────────────────────────────────────────────────────┘
```

## 开发时间估算

| 阶段 | 预计工作量 |
|------|-----------|
| 第一阶段：项目基础搭建 | 中等 |
| 第二阶段：核心状态管理 | 中等 |
| 第三阶段：学生信息管理 | 中等 |
| 第四阶段：座位区域配置 | 中等 |
| 第五阶段：拖拽排座功能 | 较高 |
| 第六阶段：座位表导出功能 | 中等 |
| 第七阶段：额外功能 | 较高 |
| 第八阶段：界面优化与测试 | 中等 |

## 实施顺序

1. 首先完成项目基础搭建和依赖安装
2. 实现核心状态管理 (Pinia stores)
3. 开发学生导入和列表功能
4. 开发座位网格和配置功能
5. 实现核心拖拽排座功能
6. 添加导出功能
7. 实现额外功能 (保存/加载、随机排座、智能排座)
8. 界面优化和测试

---

**请确认此开发计划是否符合您的需求，确认后我将开始实施。**
